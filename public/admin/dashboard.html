<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>TactoColor Admin â€” Dashboard</title>
  <link rel="stylesheet" href="./admin.css"/>
</head>
<body>
  <div class="adminWrap">
    <header class="topbar">
      <a class="brand" href="/" aria-label="Storefront">
        <span class="dot" aria-hidden="true"></span>
        <span>TactoColor Admin</span>
      </a>
      <nav class="nav">
        <a class="pill" href="/" title="Public website">Storefront</a>
        <button class="pill" id="logoutBtn" title="Sign out">Logout</button>
      </nav>
    </header>

    <section class="hero">
      <h1>Control center</h1>
      <p>Manage products and orders. Changes are saved in JSON files on the server and immediately visible on the storefront.</p>
    </section>

    <div class="tabs" role="tablist" aria-label="Admin sections">
      <button class="tab active" id="tabProducts" role="tab">Products</button>
      <button class="tab" id="tabOrders" role="tab">Orders</button>
    </div>

    <div id="globalMsg"></div>

    <!-- PRODUCTS -->
    <section id="sectionProducts">
      <div class="split">
        <div class="panel">
          <h2 class="h" id="formTitle">Add product</h2>
          <div class="muted small" style="margin:-6px 0 12px; line-height:1.6">
            Fields: <span class="code">name</span>, <span class="code">price</span>, <span class="code">logo URL</span>, <span class="code">description</span>. Product <span class="code">id</span> is generated automatically.
          </div>

          <form id="productForm" class="form">
            <input type="hidden" id="pid"/>
            <div>
              <label for="pname">Name</label>
              <input id="pname" required placeholder="Product name"/>
            </div>
            <div>
              <label for="pprice">Price</label>
              <input id="pprice" required placeholder="e.g. 29.99"/>
            </div>
            <div>
              <label for="plogo">Logo URL</label>
              <input id="plogo" placeholder="https://..."/>
            </div>
            <div>
              <label for="pdesc">Description</label>
              <textarea id="pdesc" placeholder="Short description"></textarea>
            </div>

            <div class="row" style="justify-content:flex-start;gap:10px">
              <button class="btn primary" type="submit" id="saveBtn">Save</button>
              <button class="btn" type="button" id="cancelEdit" style="display:none">Cancel</button>
              <button class="btn danger" type="button" id="resetForm">Reset</button>
            </div>
          </form>

          <div id="productMsg" style="margin-top:12px"></div>

          <div class="notice" style="margin-top:14px">
            <div style="font-weight:800;margin-bottom:6px">Image notes</div>
            <div class="muted small" style="line-height:1.6">
              Logos are URLs (simplest approach). If you want real file uploads, we can extend the backend to store uploaded images.
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="row" style="justify-content:space-between;gap:10px">
            <h2 class="h" style="margin:0">All products</h2>
            <div class="row" style="justify-content:flex-end;gap:10px">
              <button class="btn" id="refreshProducts">Refresh</button>
            </div>
          </div>

          <div class="field" style="margin:10px 0 12px">
            <span class="muted">Filter</span>
            <input id="filterProducts" placeholder="search..." autocomplete="off"/>
          </div>

          <div id="productsTableWrap"></div>
        </div>
      </div>
    </section>

    <!-- ORDERS -->
    <section id="sectionOrders" style="display:none">
      <div class="split">
        <div class="panel">
          <div class="row" style="justify-content:space-between;gap:10px">
            <h2 class="h" style="margin:0">Orders</h2>
            <div class="row" style="justify-content:flex-end;gap:10px">
              <button class="btn" id="refreshOrders">Refresh</button>
              <button class="btn" id="exportCsv">Export CSV</button>
            </div>
          </div>

          <div class="field" style="margin:10px 0 12px">
            <span class="muted">Filter</span>
            <input id="filterOrders" placeholder="name / email / id..." autocomplete="off"/>
          </div>

          <div id="ordersTableWrap"></div>
        </div>

        <div class="panel">
          <h2 class="h">Order details</h2>
          <div id="orderDetails" class="muted small" style="line-height:1.7">
            Select an order to see details.
          </div>
          <div id="orderActions" style="margin-top:12px"></div>
        </div>
      </div>
    </section>

    <div class="footer">Data files: server/data/products.json and server/data/orders.json</div>
  </div>

  <script type="module" src="./dashboard.js"></script>
</body>
</html>
